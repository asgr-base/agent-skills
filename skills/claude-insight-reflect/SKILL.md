---
name: claude-insight-reflect
description: Claude Code Insightレポートを生成・日本語翻訳し、示唆をCLAUDE.mdに反映。/insights、使用状況分析、改善提案関連の質問時に使用。
---

# Claude Insight Reflect

Claude Codeの`/insights`コマンドで生成されたレポートを分析し、示唆をプロジェクト設定に反映するスキル。

## クイックリファレンス

| タスク | コマンド |
|--------|----------|
| Insightレポート生成・反映 | `/claude-insight-reflect` |
| レポート生成のみ | `/claude-insight-reflect --report-only` |
| 示唆反映のみ | `/claude-insight-reflect --apply-only` |

## 前提条件

1. **Claude Code CLI**: `claude`コマンドが利用可能であること
2. **出力ディレクトリ**: `.claude/usage-data/`が存在すること

## ワークフロー

### 1. Insightレポート生成

```bash
# Claude Code CLIでinsightsコマンドを実行
claude insights --output .claude/usage-data/report-YYYYMMDD.html
```

**注意**: `claude insights`コマンドはインタラクティブに実行される。生成されたHTMLファイルのパスを確認すること。

### 2. レポートの日本語翻訳

生成された英語レポート（`report-YYYYMMDD.html`）を読み込み、以下を翻訳:

- UIテキスト（ボタン、ラベル、見出し）
- 説明文・解説
- 提案事項（Suggestions）
- エラーメッセージ

**出力**: `.claude/usage-data/report-YYYYMMDD-ja.html`

**翻訳時の注意**:
- JavaScriptのロジックは変更しない
- タイムゾーンセレクタのデフォルトをユーザーのローカルタイムゾーンに変更（任意）
- 技術用語（API名、コマンド名等）は原文のまま

### 3. 示唆の分析

日本語レポートから以下のセクションを抽出・分析:

| セクション | 分析ポイント |
|------------|--------------|
| **試すべき機能** | 未使用のClaude Code機能で有用なもの |
| **カスタムスキル** | スキルの改善提案 |
| **セッション分析** | 非効率なパターンの特定 |
| **エラー分析** | 頻出エラーと対策 |

### 4. CLAUDE.mdへの反映

分析結果に基づき、以下を更新:

```markdown
## HOW（必須ルール）

### [新規セクション名]

[示唆から導出されたルール・ガイドライン]
```

**反映基準**:
- 繰り返し発生する問題 → 必須ルールとして追加
- 効率化の提案 → ベストプラクティスとして追加
- スキル固有の改善 → 該当スキルのSKILL.mdに追加

### 5. スキルへの反映

示唆が特定のスキルに関連する場合:

1. 該当スキルの`SKILL.md`を特定
2. 「チェックリスト」セクションに追加
3. ワークフローの改善点を反映

**例**: 特定スキルへのページネーション警告追加

## 自動反映チェックリスト

Claude Codeが示唆反映時に必ず確認するステップ:

1. **レポート全体の確認**
   - 「試すべき機能」セクションを確認
   - 「カスタムスキル」セクションを確認
   - 「セッション分析」で非効率パターンを特定

2. **反映先の判断**
   - 汎用ルール → CLAUDE.md
   - スキル固有 → 該当SKILL.md
   - 新規スキル提案 → ユーザーに確認

3. **重複チェック**
   - 既存のルールと重複しないか確認
   - 類似ルールがあれば統合を検討

4. **ユーザー確認**
   - 反映する示唆をリスト表示
   - 「すべて追加」「選択して追加」「スキップ」を選択肢として提示

## 出力ファイル

| ファイル | 説明 |
|----------|------|
| `.claude/usage-data/report-YYYYMMDD.html` | 英語版レポート（オリジナル） |
| `.claude/usage-data/report-YYYYMMDD-ja.html` | 日本語版レポート |
| `CLAUDE.md` | 更新されたプロジェクト設定 |
| `*.SKILL.md` | 更新されたスキル設定（該当する場合） |

## エラーハンドリング

| エラー | 対処 |
|--------|------|
| `claude`コマンドが見つからない | Claude Code CLIをインストール |
| レポート生成失敗 | CLIの出力を確認、権限をチェック |
| 翻訳対象ファイルなし | `.claude/usage-data/`内のHTMLを確認 |
| CLAUDE.md更新失敗 | ファイルパスと権限を確認 |

## 注意事項

- **手動確認推奨**: 示唆の反映前にユーザーに確認を求める
- **バックアップ**: CLAUDE.md更新前に変更内容を表示
- **増分更新**: 既存のルールを上書きせず、追加・統合する
- **Last Updated更新**: CLAUDE.md更新時は日付を更新

---

**Version**: 1.0.0
**Last Updated**: 2026-02-05
